[2020-12-16 19:52:09,143 INFO root] Taurus CLI Tool v1.15.0
[2020-12-16 19:52:09,144 DEBUG root] Command-line options: {'log': '/tmp/bzt_mfl4aqtg.log', 'option': ['modules.console.disable=true'], 'quiet': None, 'verbose': None, 'no_system_configs': None, 'aliases': []}
[2020-12-16 19:52:09,144 DEBUG root] Python: CPython 3.8.0
[2020-12-16 19:52:09,144 DEBUG root] OS: uname_result(system='Linux', node='7f0c4ada0c49', release='5.4.0-1029-aws', version='#30~18.04.1-Ubuntu SMP Tue Oct 20 11:09:25 UTC 2020', machine='x86_64', processor='x86_64')
[2020-12-16 19:52:09,144 INFO root] Starting with configs: ['bitbucket.yml']
[2020-12-16 19:52:09,144 DEBUG root] Using personal config: /root/.bzt-rc
[2020-12-16 19:52:09,144 INFO Engine] Configuring...
[2020-12-16 19:52:09,144 DEBUG Engine] Reading system configs from: /etc/bzt.d
[2020-12-16 19:52:09,154 DEBUG Engine] Base configs list: ['/usr/local/lib/python3.8/dist-packages/bzt/resources/10-base-config.yml', '/etc/bzt.d/50-pbench-enhanced.json', '/etc/bzt.d/90-artifacts-dir.json', '/etc/bzt.d/99-zinstallID.json']
[2020-12-16 19:52:09,154 DEBUG Engine.Configuration] Configs: ['/usr/local/lib/python3.8/dist-packages/bzt/resources/10-base-config.yml', '/etc/bzt.d/50-pbench-enhanced.json', '/etc/bzt.d/90-artifacts-dir.json', '/etc/bzt.d/99-zinstallID.json']
[2020-12-16 19:52:09,154 DEBUG Engine.Configuration] Reading /usr/local/lib/python3.8/dist-packages/bzt/resources/10-base-config.yml as YAML
[2020-12-16 19:52:09,169 DEBUG Engine.Configuration] Reading /etc/bzt.d/50-pbench-enhanced.json as YAML
[2020-12-16 19:52:09,170 DEBUG Engine.Configuration] Reading /etc/bzt.d/90-artifacts-dir.json as YAML
[2020-12-16 19:52:09,170 DEBUG Engine.Configuration] Reading /etc/bzt.d/99-zinstallID.json as YAML
[2020-12-16 19:52:09,170 DEBUG Engine] User configs list: ['/root/.bzt-rc', 'bitbucket.yml']
[2020-12-16 19:52:09,170 DEBUG Engine.Configuration] Configs: ['/root/.bzt-rc', 'bitbucket.yml']
[2020-12-16 19:52:09,171 DEBUG Engine.Configuration] Reading /root/.bzt-rc as YAML
[2020-12-16 19:52:09,173 DEBUG Engine.Configuration] Reading bitbucket.yml as YAML
[2020-12-16 19:52:09,181 DEBUG Engine.Configuration] Configs: ['/root/.bzt-rc', 'bitbucket.yml']
[2020-12-16 19:52:09,181 DEBUG Engine.Configuration] Reading /root/.bzt-rc as YAML
[2020-12-16 19:52:09,183 DEBUG Engine.Configuration] Reading bitbucket.yml as YAML
[2020-12-16 19:52:09,196 DEBUG Engine] Requesting updates info: https://gettaurus.org/updates/?version=1.15.0&installID=Docker
[2020-12-16 19:52:09,197 DEBUG ConfigOverrider] Applying modules.console.disable=true
[2020-12-16 19:52:09,197 DEBUG HTTPClient] Making HTTP request GET https://gettaurus.org/updates/?version=1.15.0&installID=Docker
[2020-12-16 19:52:09,197 DEBUG ConfigOverrider] Applying: [disable]=true
[2020-12-16 19:52:09,197 DEBUG ConfigOverrider] Parsed override value: 'true' -> True (<class 'bool'>)
[2020-12-16 19:52:09,198 INFO Engine] Artifacts dir: /dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09
[2020-12-16 19:52:09,199 DEBUG Engine] New artifact filename: /dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09/effective
[2020-12-16 19:52:09,199 DEBUG urllib3.connectionpool] Starting new HTTPS connection (1): gettaurus.org:443
[2020-12-16 19:52:09,200 DEBUG Engine.Configuration] Dumping YAML config into /dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09/effective.yml
[2020-12-16 19:52:09,213 DEBUG Engine.Configuration] Dumping JSON config into /dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09/effective.json
[2020-12-16 19:52:09,214 DEBUG Engine] New artifact filename: /dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09/merged.yml
[2020-12-16 19:52:09,214 DEBUG Engine.Configuration] Dumping YAML config into /dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09/merged.yml
[2020-12-16 19:52:09,218 DEBUG Engine] New artifact filename: /dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09/merged.json
[2020-12-16 19:52:09,219 DEBUG Engine.Configuration] Dumping JSON config into /dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09/merged.json
[2020-12-16 19:52:09,219 DEBUG Engine] Add existing artifact (move=False): bitbucket.yml
[2020-12-16 19:52:09,219 DEBUG Engine] Copying bitbucket.yml to /dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09/bitbucket.yml
[2020-12-16 19:52:09,219 DEBUG Engine] Set PYTHONPATH to '/root/.bzt/python-packages/3.8.0' + '/dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09/python-packages/3.8.0' + 
[2020-12-16 19:52:09,219 DEBUG Engine] Content of user packages dir: %s
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: OBJC_DISABLE_INITIALIZE_FORK_SAFETY=YES
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: application_hostname=http://bitbucket-loadbala-cs8s8ccqbfud-30797893.us-west-1.elb.amazonaws.com
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: application_protocol=http
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: application_port=80
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: secure=True
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: admin_login=admin
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: admin_password=admin
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: load_executor=jmeter
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: concurrency=20
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: test_duration=50m
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: ramp-up=10m
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: total_actions_per_hour=32700
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: WEBDRIVER_VISIBLE=False
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: JMETER_VERSION=5.2.1
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: LANGUAGE=en_US.utf8
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: allow_analytics=True
[2020-12-16 19:52:09,220 DEBUG Engine] OS env: TAURUS_ARTIFACTS_DIR=/dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09
[2020-12-16 19:52:09,220 DEBUG root] Closing log handler: /tmp/bzt_mfl4aqtg.log
[2020-12-16 19:52:09,221 DEBUG root] Switched writing logs to /dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09/bzt.log
[2020-12-16 19:52:09,221 DEBUG root] Linting config
[2020-12-16 19:52:09,223 INFO Engine] Preparing...
[2020-12-16 19:52:09,223 DEBUG Engine] Module config: consolidator {'class': 'bzt.modules.aggregator.ConsolidatingAggregator', 'rtimes-len': 0, 'percentiles': []}
[2020-12-16 19:52:09,223 DEBUG root] Importing module: bzt.modules.aggregator
[2020-12-16 19:52:09,321 DEBUG root] Loading class: 'ConsolidatingAggregator' from <module 'bzt.modules.aggregator' from '/usr/local/lib/python3.8/dist-packages/bzt/modules/aggregator.py'>
[2020-12-16 19:52:09,321 DEBUG Engine.consolidator] Buffer scaling setup: percentile None from [] selected
[2020-12-16 19:52:09,321 DEBUG Engine] Module config: monitoring {'class': 'bzt.modules.monitoring.Monitoring'}
[2020-12-16 19:52:09,321 DEBUG root] Importing module: bzt.modules.monitoring
[2020-12-16 19:52:09,322 DEBUG root] Loading class: 'Monitoring' from <module 'bzt.modules.monitoring' from '/usr/local/lib/python3.8/dist-packages/bzt/modules/monitoring.py'>
[2020-12-16 19:52:09,322 DEBUG Engine] Module config: shellexec {'class': 'bzt.modules.shellexec.ShellExecutor'}
[2020-12-16 19:52:09,322 DEBUG root] Importing module: bzt.modules.shellexec
[2020-12-16 19:52:09,327 DEBUG easyprocess] version=0.3
[2020-12-16 19:52:09,328 DEBUG pyvirtualdisplay] version=1.3.2
[2020-12-16 19:52:09,334 DEBUG root] Loading class: 'ShellExecutor' from <module 'bzt.modules.shellexec' from '/usr/local/lib/python3.8/dist-packages/bzt/modules/shellexec.py'>
[2020-12-16 19:52:09,334 DEBUG Engine.shellexec] Added prepare task: {'command': 'python util/pre_run/environment_checker.py'}
[2020-12-16 19:52:09,334 DEBUG Engine.shellexec] Added prepare task: {'command': 'python util/pre_run/git_client_check.py'}
[2020-12-16 19:52:09,334 DEBUG Engine.shellexec] Added prepare task: {'command': 'python util/data_preparation/bitbucket_prepare_data.py'}
[2020-12-16 19:52:09,334 DEBUG Engine.shellexec] Added shutdown task: {'command': 'python util/post_run/jmeter_post_check.py'}
[2020-12-16 19:52:09,334 DEBUG Engine.shellexec] Added shutdown task: {'command': 'python util/jtl_convertor/jtls-to-csv.py kpi.jtl selenium.jtl'}
[2020-12-16 19:52:09,334 DEBUG Engine.shellexec] Added post-process task: {'command': 'python util/analytics/analytics.py bitbucket'}
[2020-12-16 19:52:09,334 DEBUG Engine.shellexec] Added post-process task: {'command': 'python util/post_run/cleanup_results_dir.py'}
[2020-12-16 19:52:09,334 INFO Engine.shellexec.Task] Starting shell command: python util/pre_run/environment_checker.py
[2020-12-16 19:52:09,335 DEBUG root] Executing shell: python util/pre_run/environment_checker.py at /dc-app-performance-toolkit/app
[2020-12-16 19:52:09,426 DEBUG Engine.shellexec.Task] Output for python util/pre_run/environment_checker.py:
Python version: (3, 8, 0)
Data Center App Performance Toolkit version: 3.2.0

[2020-12-16 19:52:09,426 DEBUG Engine.shellexec.Task] Task was finished with exit code 0: python util/pre_run/environment_checker.py
[2020-12-16 19:52:09,426 INFO Engine.shellexec.Task] Starting shell command: python util/pre_run/git_client_check.py
[2020-12-16 19:52:09,426 DEBUG root] Executing shell: python util/pre_run/git_client_check.py at /dc-app-performance-toolkit/app
[2020-12-16 19:52:09,453 DEBUG Engine.shellexec.Task] Output for python util/pre_run/git_client_check.py:
Git version: b'git version 2.17.1\n'

[2020-12-16 19:52:09,453 DEBUG Engine.shellexec.Task] Task was finished with exit code 0: python util/pre_run/git_client_check.py
[2020-12-16 19:52:09,453 INFO Engine.shellexec.Task] Starting shell command: python util/data_preparation/bitbucket_prepare_data.py
[2020-12-16 19:52:09,453 DEBUG root] Executing shell: python util/data_preparation/bitbucket_prepare_data.py at /dc-app-performance-toolkit/app
[2020-12-16 19:52:09,643 DEBUG Engine.shellexec.Task] Output for python util/data_preparation/bitbucket_prepare_data.py:
Started preparing data
Server url:  http://http://bitbucket-loadbala-cs8s8ccqbfud-30797893.us-west-1.elb.amazonaws.com:80

[2020-12-16 19:52:09,643 WARNING Engine.shellexec.Task] Errors for python util/data_preparation/bitbucket_prepare_data.py:
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/urllib3/connection.py", line 159, in _new_conn
    conn = connection.create_connection(
  File "/usr/local/lib/python3.8/dist-packages/urllib3/util/connection.py", line 61, in create_connection
    for res in socket.getaddrinfo(host, port, family, socket.SOCK_STREAM):
  File "/usr/lib/python3.8/socket.py", line 914, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
socket.gaierror: [Errno -2] Name or service not known

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/urllib3/connectionpool.py", line 670, in urlopen
    httplib_response = self._make_request(
  File "/usr/local/lib/python3.8/dist-packages/urllib3/connectionpool.py", line 392, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib/python3.8/http/client.py", line 1230, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib/python3.8/http/client.py", line 1276, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.8/http/client.py", line 1225, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.8/http/client.py", line 1004, in _send_output
    self.send(msg)
  File "/usr/lib/python3.8/http/client.py", line 944, in send
    self.connect()
  File "/usr/local/lib/python3.8/dist-packages/urllib3/connection.py", line 187, in connect
    conn = self._new_conn()
  File "/usr/local/lib/python3.8/dist-packages/urllib3/connection.py", line 171, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f048a252a90>: Failed to establish a new connection: [Errno -2] Name or service not known

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/requests/adapters.py", line 439, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.8/dist-packages/urllib3/connectionpool.py", line 726, in urlopen
    retries = retries.increment(
  File "/usr/local/lib/python3.8/dist-packages/urllib3/util/retry.py", line 439, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='http', port=80): Max retries exceeded with url: //bitbucket-loadbala-cs8s8ccqbfud-30797893.us-west-1.elb.amazonaws.com:80/dashboard (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f048a252a90>: Failed to establish a new connection: [Errno -2] Name or service not known'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "util/data_preparation/bitbucket_prepare_data.py", line 164, in <module>
    main()
  File "util/data_preparation/bitbucket_prepare_data.py", line 154, in main
    __check_current_language(client)
  File "util/data_preparation/bitbucket_prepare_data.py", line 136, in __check_current_language
    language = bitbucket_api.get_locale()
  File "/dc-app-performance-toolkit/app/util/api/bitbucket_clients.py", line 167, in get_locale
    page = self.get(f'{self.host}/dashboard', "Could not get page content.").content
  File "/dc-app-performance-toolkit/app/util/api/abstract_clients.py", line 61, in get
    response = self.session.get(url, auth=self.base_auth, verify=False, timeout=self.requests_timeout,
  File "/usr/local/lib/python3.8/dist-packages/requests/sessions.py", line 543, in get
    return self.request('GET', url, **kwargs)
  File "/usr/local/lib/python3.8/dist-packages/requests/sessions.py", line 530, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.8/dist-packages/requests/sessions.py", line 643, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.8/dist-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='http', port=80): Max retries exceeded with url: //bitbucket-loadbala-cs8s8ccqbfud-30797893.us-west-1.elb.amazonaws.com:80/dashboard (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f048a252a90>: Failed to establish a new connection: [Errno -2] Name or service not known'))

[2020-12-16 19:52:09,643 DEBUG Engine.shellexec.Task] Task was finished with exit code 1: python util/data_preparation/bitbucket_prepare_data.py
[2020-12-16 19:52:09,644 ERROR root] CalledProcessError: Command 'python util/data_preparation/bitbucket_prepare_data.py' returned non-zero exit status 1.
  File "/usr/local/lib/python3.8/dist-packages/bzt/cli.py", line 259, in perform
    self.engine.prepare()
  File "/usr/local/lib/python3.8/dist-packages/bzt/engine/engine.py", line 215, in prepare
    self.__prepare_services()
  File "/usr/local/lib/python3.8/dist-packages/bzt/engine/engine.py", line 668, in __prepare_services
    module.prepare()
  File "/usr/local/lib/python3.8/dist-packages/bzt/modules/shellexec.py", line 130, in prepare
    task.start()
  File "/usr/local/lib/python3.8/dist-packages/bzt/modules/shellexec.py", line 217, in start
    self._get_results()
  File "/usr/local/lib/python3.8/dist-packages/bzt/modules/shellexec.py", line 244, in _get_results
    raise CalledProcessError(self.process.returncode, self)
[2020-12-16 19:52:09,644 INFO Engine] Post-processing...
[2020-12-16 19:52:09,644 DEBUG Engine.consolidator] Consolidator buffer[0]: dict_keys([])
[2020-12-16 19:52:09,644 INFO Engine.shellexec.Task] Starting shell command: python util/analytics/analytics.py bitbucket
[2020-12-16 19:52:09,644 DEBUG root] Executing shell: python util/analytics/analytics.py bitbucket at /dc-app-performance-toolkit/app
[2020-12-16 19:52:09,836 WARNING Engine.shellexec.Task] Errors for python util/analytics/analytics.py bitbucket:
Traceback (most recent call last):
  File "util/analytics/analytics.py", line 144, in <module>
    main()
  File "util/analytics/analytics.py", line 137, in main
    collector = AnalyticsCollector(application)
  File "util/analytics/analytics.py", line 33, in __init__
    self.results_log = ResultsFileReader()
  File "/dc-app-performance-toolkit/app/util/analytics/log_reader.py", line 120, in __init__
    self.results_log = self.get_results_log()
  File "/dc-app-performance-toolkit/app/util/analytics/log_reader.py", line 124, in get_results_log
    self.validate_file_exists(results_log_path)
  File "/dc-app-performance-toolkit/app/util/analytics/log_reader.py", line 16, in validate_file_exists
    raise Exception(f'{path} does not exist')
Exception: /dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09/results.csv does not exist

[2020-12-16 19:52:09,836 DEBUG Engine.shellexec.Task] Task was finished with exit code 1: python util/analytics/analytics.py bitbucket
[2020-12-16 19:52:09,836 DEBUG Engine] post_process: Command 'python util/analytics/analytics.py bitbucket' returned non-zero exit status 1.
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/bzt/engine/engine.py", line 340, in post_process
    module.post_process()
  File "/usr/local/lib/python3.8/dist-packages/bzt/modules/shellexec.py", line 159, in post_process
    task.start()
  File "/usr/local/lib/python3.8/dist-packages/bzt/modules/shellexec.py", line 217, in start
    self._get_results()
  File "/usr/local/lib/python3.8/dist-packages/bzt/modules/shellexec.py", line 244, in _get_results
    raise CalledProcessError(self.process.returncode, self)
subprocess.CalledProcessError: Command 'python util/analytics/analytics.py bitbucket' returned non-zero exit status 1.

[2020-12-16 19:52:09,837 DEBUG Engine.Configuration] Dumping YAML config into /dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09/effective.yml
[2020-12-16 19:52:09,852 DEBUG Engine.Configuration] Dumping JSON config into /dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09/effective.json
[2020-12-16 19:52:09,853 DEBUG root] CalledProcessError: Command 'python util/analytics/analytics.py bitbucket' returned non-zero exit status 1.
  File "/usr/local/lib/python3.8/dist-packages/bzt/cli.py", line 267, in perform
    self.engine.post_process()
  File "/usr/local/lib/python3.8/dist-packages/bzt/engine/engine.py", line 354, in post_process
    reraise(exc_info, exc_value)
  File "/usr/local/lib/python3.8/dist-packages/bzt/utils.py", line 102, in reraise
    raise exc
  File "/usr/local/lib/python3.8/dist-packages/bzt/engine/engine.py", line 340, in post_process
    module.post_process()
  File "/usr/local/lib/python3.8/dist-packages/bzt/modules/shellexec.py", line 159, in post_process
    task.start()
  File "/usr/local/lib/python3.8/dist-packages/bzt/modules/shellexec.py", line 217, in start
    self._get_results()
  File "/usr/local/lib/python3.8/dist-packages/bzt/modules/shellexec.py", line 244, in _get_results
    raise CalledProcessError(self.process.returncode, self)
[2020-12-16 19:52:09,853 INFO root] Artifacts dir: /dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09
[2020-12-16 19:52:09,853 WARNING root] Done performing with code: 1
[2020-12-16 19:52:09,853 DEBUG root] Closing log handler: /dc-app-performance-toolkit/app/results/bitbucket/2020-12-16_19-52-09/bzt.log
